<!DOCTYPE html>
<html ng-app="myapp">
	<head>
		<link rel="stylesheet" href="css/bootstrap.min.css">
	</head>
	<body ng-controller="PersonController">
		<div class="container">
			<div class="row">
				<div class="col-md-8">
					<h2 style="text-align: center">Person List</h2>
					<table class="table table-striped table-hover table-condensed">
						<thead>
							<th>ID</th>
							<th>Name</th>
							<th>Start Date</th>
							<th></th>
						</thead>
						<tbody>
							<tr ng-repeat="person in persons" ng-include="getTemplate(person)"></tr>
							
							<tr ng-show="persons.length === 0">
								<td colspan="4">There are no people to show :(</td>
							</tr>
							
							<tr ng-show="states.showPersonForm">
								<td><input type="text" class="form-control" placeholder="id" ng-model="newPerson.id"></td>
								<td><input type="text" class="form-control" placeholder="name" ng-model="newPerson.name"></td>
								<td><input type="text" class="form-control" placeholder="start date" ng-model="newPerson.startDate"></td>
								<td>
									<button type="button" class="btn btn-primary" ng-click="addPerson(newPerson);">Add</button>
									<button type="button" class="btn btn-default" ng-click="showPersonForm(false)">Cancel</button>
								</td>
							</tr>
							<!--  FOR DEBUGGING <tr><td>{{newPerson | json}}</td></tr> -->
						</tbody>
					</table>
					<br />
					<button type="button" class="btn btn-primary" ng-click="showPersonForm(true)">Add Person</button>
				
					<script type="text/ng-template" id="display">
						<td ng-model="person.id">{{person.id}}</td>
						<td ng-model="person.name">{{person.name}}</td>
						<td ng-model="person.startDate">{{person.startDate | date}}</td>
						<td>
							<button type="button" class="btn btn-primary" ng-click="editPerson(person)"><span class="glyphicon glyphicon-pencil"></span></button>
							<button type="button" class="btn btn-default" ng-click="deletePerson(person)"><span class="glyphicon glyphicon-trash"></span></button>
						</td>
					</script>
					
					<script type="text/ng-template" id="edit">
						<td><input type="text" ng-model="selected.id" value="selected.id" ></td>
						<td><input type="text" ng-model="selected.name" value="selected.name" ></td>
						<td><input type="text" ng-model="selected.startDate" value="selected.startDate" ></td>

						<td>
							<button type="button" class="btn btn-primary" ng-click="saveEdit(selected)"><span class="glyphicon glyphicon-ok"></span></button>
							<button type="button" class="btn btn-danger" ng-click="reset()"><span class="glyphicon glyphicon-remove"></span></button>
						</td>
					</script>
					http://collabedit.com/ugmwk
				</div>
			</div>
		</div>		

		<script src="js/angular.min.js"></script>
		<script src="js/jquery-2.2.0.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/app.js"></script>
	</body>
</html>
